<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <head>
        <meta http-equiv="cache-control" content="max-age=86400"/>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=9"/>
        <meta name="generator" content="Doxygen 1.14.0"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>qb: Core Concept: The Actor Model in QB</title>
        <meta name="description" content="qb OpenSource C++17 Actor Framework Documentation, all API detailed">
        <meta name="keywords"
              content="qb, cube, actor, framework, actor framework, opensource, cpp, c++, cpp17, c++17, documentation, docs, git">
        <meta name="author" content="isndev">
        <!-- BEGIN opengraph metadata -->
<!--        <meta property="og:title" content="Doxygen Awesome"/>-->
<!--        <meta property="og:image"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta property="og:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
<!--        <meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/"/>-->
        <!-- END opengraph metadata -->
        <!-- BEGIN twitter metadata -->
<!--        <meta name="twitter:image:src"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta name="twitter:title" content="Doxygen Awesome"/>-->
<!--        <meta name="twitter:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
        <!-- END twitter metadata -->
        <title>qb: Core Concept: The Actor Model in QB</title>
        <link href="tabs.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
        <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
        <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
        <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
        <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
        <script type="text/javascript" src="toggle-alternative-theme.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
            DoxygenAwesomeDarkModeToggle.init()
            DoxygenAwesomeParagraphLink.init()
            DoxygenAwesomeInteractiveToc.init()
            DoxygenAwesomeTabs.init()
        </script>
        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css"/>
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
    </head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/isndev/qb" class="github-corner" title="View source on GitHub"
   target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40"
         style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm {
    animation: octocat-wave 560ms ease-in-out
}
@keyframes octocat-wave {
    0%, 100% {
        transform: rotate(0)
    }
    20%, 60% {
        transform: rotate(-25deg)
    }
    40%, 80% {
        transform: rotate(10deg)
    }
}
@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none
    }
    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }
}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr style="height: 56px;">
                <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">qb
                        &#160;<span id="projectnumber">2.0.0.0</span>
                    </div>
                    <div id="projectbrief">C++17 Actor Framework</div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div style="padding-left: 0.5em;">
        <a class="navbar-brand" href="https://github.com/isndev/qb">
            <img src="GitHub-Mark-64px.png" width="32px" alt="qb">
        </a>
        <a class="github-button" href="https://github.com/isndev/qb/issues" data-icon="octicon-issue-opened" data-size="large" data-show-count="true" aria-label="Issue isndev/qb on GitHub">Issue</a>
        <a class="github-button" href="https://github.com/isndev/qb/subscription" data-icon="octicon-eye" data-size="large" data-show-count="true" aria-label="Watch isndev/qb on GitHub">Watch</a>
        <a class="github-button" href="https://github.com/isndev/qb" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star isndev/qb on GitHub">Star</a>
        <a class="github-button" href="https://github.com/isndev/qb/fork" data-icon="octicon-repo-forked" data-size="large" data-show-count="true" aria-label="Fork isndev/qb on GitHub">Fork</a>
        <a class="github-button" href="https://github.com/isndev" data-size="large" data-show-count="false" aria-label="Follow @isndev on GitHub">Follow @isndev</a>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('core_concepts_actor_model_md.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Core Concept: The Actor Model in QB </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Understand how QB implements the Actor Model for robust, concurrent programming, focusing on <span class="tt"><a class="el" href="classqb_1_1_actor.html" title="Base class for all actors in the qb framework.">qb::Actor</a></span> and <span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span>.</p>
<h1>Core Concept: The Actor Model in QB</h1>
<p>The QB framework is built upon the <a href="https://en.wikipedia.org/wiki/Actor_model">Actor Model</a>, a powerful paradigm for designing concurrent and distributed systems. Instead of directly managing threads and locks, you work with <b>actors</b>: independent, isolated units of computation and state.</p>
<h2><span class="tt"><a class="el" href="classqb_1_1_actor.html" title="Base class for all actors in the qb framework.">qb::Actor</a></span>: The Heart of Your Concurrent Logic</h2>
<p>Every actor in your system will inherit from the <span class="tt"><a class="el" href="classqb_1_1_actor.html" title="Base class for all actors in the qb framework.">qb::Actor</a></span> base class (<span class="tt"><a class="el" href="core_2_actor_8h.html" title="Actor base class and core actor model implementation.">qb/core/Actor.h</a></span>). Think of an actor as a specialized object with these key characteristics:</p>
<ul>
<li><b>Autonomous and Isolated:</b> Each actor is a self-contained entity. Its internal data (member variables, or "state") is strictly private and protected from direct access by any other actor. This is fundamental to preventing data races and simplifying concurrent state management.</li>
<li><b>Message-Driven:</b> Actors interact <em>exclusively</em> by sending asynchronous messages (called <b>events</b>) to one another. An actor's behavior is defined by how it reacts to the events it receives.</li>
<li><b>Sequential Processing:</b> Each actor has an implicit mailbox where incoming events are queued. The actor processes these events one at a time, in the order they are effectively received by its managing <span class="tt">VirtualCore</span>. This sequential processing of its own events guarantees that an actor's internal state is modified safely, without internal race conditions.</li>
</ul>
<p>A simplified view of actor interaction: </p><div class="fragment"><div class="line">+-----------+      +-----------------+      +-----------+</div>
<div class="line">|  Actor A  |-----&gt;|   Event Message |-----&gt;|  Actor B  |</div>
<div class="line">| (Sender)  |      | (e.g., MyEvent) |      | (Receiver)|</div>
<div class="line">+-----------+      +-----------------+      +-----------+</div>
<div class="line">     |                                           ^</div>
<div class="line">     | 1. push&lt;MyEvent&gt;(actor_b_id, ...)         | 3. Processes MyEvent</div>
<div class="line">     +-------------------------------------------+</div>
<div class="line">                                                 | 2. Event arrives in</div>
<div class="line">                                                 |    Actor B&#39;s mailbox</div>
</div><!-- fragment --><h3>Defining a Simple Actor</h3>
<p>Let's look at a basic example. (A runnable version can be found in <span class="tt">example/core/example1_simple_actor.cpp</span>.)</p>
<div class="fragment"><div class="line"><span class="comment">// Include necessary QB headers</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_actor_8h.html">qb/actor.h</a>&gt;</span> <span class="comment">// For qb::Actor, qb::ActorId</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_event_8h.html">qb/event.h</a>&gt;</span>   <span class="comment">// For qb::Event</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">qb/io.h</a>&gt;</span>      <span class="comment">// For qb::io::cout (thread-safe console output)</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span>     <span class="comment">// For std::endl</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// --- 1. Define Your Event(s) ---</span></div>
<div class="line"><span class="comment">// Events are simple structs or classes inheriting from qb::Event</span></div>
<div class="line"><span class="keyword">struct </span>CountEvent : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {</div>
<div class="line">    <span class="keywordtype">int</span> increment_by;</div>
<div class="line">    <span class="comment">// Constructor to easily create the event with data</span></div>
<div class="line">    <span class="keyword">explicit</span> CountEvent(<span class="keywordtype">int</span> amount) : increment_by(amount) {}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// --- 2. Define Your Actor ---</span></div>
<div class="line"><span class="keyword">class </span>CounterActor : <span class="keyword">public</span> <a class="code hl_class" href="classqb_1_1_actor.html">qb::Actor</a> {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">// --- Actor&#39;s Private State ---</span></div>
<div class="line">    <span class="keywordtype">int</span> _current_count = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// --- Constructor (optional) ---</span></div>
<div class="line">    CounterActor() = <span class="keywordflow">default</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// --- Initialization (Essential) ---</span></div>
<div class="line">    <span class="comment">// Called once after construction and after the actor is assigned its unique ID.</span></div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_function" href="classqb_1_1_actor.html#ae61217d6ef37d4658b41cec6d2f6719f">onInit</a>()<span class="keyword"> override </span>{</div>
<div class="line">        <a class="code hl_class" href="classqb_1_1io_1_1cout.html">qb::io::cout</a>() &lt;&lt; <span class="stringliteral">&quot;CounterActor [&quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">id</a>() &lt;&lt; <span class="stringliteral">&quot;] initialized on core &quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9bd1a8a3b244d721ff43da45fc5a305f">getIndex</a>() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">        </div>
<div class="line">        <span class="comment">// *** CRUCIAL: Register event handlers here! ***</span></div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">registerEvent&lt;CountEvent&gt;</a>(*<span class="keyword">this</span>);       <span class="comment">// This actor will now handle CountEvent</span></div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">registerEvent&lt;qb::KillEvent&gt;</a>(*<span class="keyword">this</span>);  <span class="comment">// Best practice: always handle KillEvent for graceful shutdown</span></div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Return false to prevent the actor from starting</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// --- Event Handlers ---</span></div>
<div class="line">    <span class="comment">// Implement public methods to handle registered events.</span></div>
<div class="line">    <span class="comment">// The method signature must match the event type.</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">on</a>(<span class="keyword">const</span> CountEvent&amp; event) {</div>
<div class="line">        _current_count += <span class="keyword">event</span>.increment_by;</div>
<div class="line">        qb::io::cout() &lt;&lt; <span class="stringliteral">&quot;CounterActor [&quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">id</a>() &lt;&lt; <span class="stringliteral">&quot;] received CountEvent. Count is now: &quot;</span> &lt;&lt; _current_count &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Example: Actor decides to terminate itself based on its state</span></div>
<div class="line">        <span class="keywordflow">if</span> (_current_count &gt;= 10) {</div>
<div class="line">            qb::io::cout() &lt;&lt; <span class="stringliteral">&quot;CounterActor [&quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">id</a>() &lt;&lt; <span class="stringliteral">&quot;] reached target. Terminating.\n&quot;</span>;</div>
<div class="line">            <a class="code hl_function" href="classqb_1_1_actor.html#ad097f332e8617029cbd8031c1f8fdf84">kill</a>(); <span class="comment">// Request self-termination</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">on</a>(<span class="keyword">const</span> qb::KillEvent&amp; <span class="comment">/*event*/</span>) { <span class="comment">// Parameter often unused for KillEvent</span></div>
<div class="line">        qb::io::cout() &lt;&lt; <span class="stringliteral">&quot;CounterActor [&quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">id</a>() &lt;&lt; <span class="stringliteral">&quot;] received KillEvent. Shutting down.\n&quot;</span>;</div>
<div class="line">        <span class="comment">// Perform any pre-shutdown cleanup specific to this actor if necessary</span></div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#ad097f332e8617029cbd8031c1f8fdf84">kill</a>(); <span class="comment">// IMPORTANT: Must call base kill() to complete termination</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// --- Destructor (Optional but good for RAII) ---</span></div>
<div class="line">    <span class="comment">// Called after the actor has fully terminated and is being removed from the system.</span></div>
<div class="line">    ~CounterActor()<span class="keyword"> override </span>{</div>
<div class="line">        qb::io::cout() &lt;&lt; <span class="stringliteral">&quot;CounterActor [&quot;</span> &lt;&lt; <a class="code hl_function" href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">id</a>() &lt;&lt; <span class="stringliteral">&quot;] destroyed. Final count: &quot;</span> &lt;&lt; _current_count &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="a_actor_8h_html"><div class="ttname"><a href="_actor_8h.html">actor.h</a></div><div class="ttdoc">Convenience header for the core QB Actor components.</div></div>
<div class="ttc" id="a_event_8h_html"><div class="ttname"><a href="_event_8h.html">event.h</a></div><div class="ttdoc">Convenience header for the QB Event system.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html"><div class="ttname"><a href="classqb_1_1_actor.html">qb::Actor</a></div><div class="ttdoc">Base class for all actors in the qb framework.</div><div class="ttdef"><b>Definition</b> Actor.h:106</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a0b7ee1d2a9d94988860df5ba5f19072c"><div class="ttname"><a href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">qb::Actor::registerEvent</a></div><div class="ttdeci">void registerEvent(_Actor &amp;actor) const noexcept</div><div class="ttdoc">Subscribe this actor to listen for a specific event type.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a245a2b7be6e086bf622d2acb78b9bded"><div class="ttname"><a href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">qb::Actor::on</a></div><div class="ttdeci">void on(KillEvent const &amp;event) noexcept</div><div class="ttdoc">Handler for KillEvent.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a9999e9e7f937bbcf96a20127fe993092"><div class="ttname"><a href="classqb_1_1_actor.html#a9999e9e7f937bbcf96a20127fe993092">qb::Actor::id</a></div><div class="ttdeci">ActorId id() const noexcept</div><div class="ttdoc">Get ActorId.</div><div class="ttdef"><b>Definition</b> Actor.h:368</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a9bd1a8a3b244d721ff43da45fc5a305f"><div class="ttname"><a href="classqb_1_1_actor.html#a9bd1a8a3b244d721ff43da45fc5a305f">qb::Actor::getIndex</a></div><div class="ttdeci">CoreId getIndex() const noexcept</div><div class="ttdoc">Get core index.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_ad097f332e8617029cbd8031c1f8fdf84"><div class="ttname"><a href="classqb_1_1_actor.html#ad097f332e8617029cbd8031c1f8fdf84">qb::Actor::kill</a></div><div class="ttdeci">void kill() const noexcept</div><div class="ttdoc">Terminate this actor and mark it for removal from the system.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_ae61217d6ef37d4658b41cec6d2f6719f"><div class="ttname"><a href="classqb_1_1_actor.html#ae61217d6ef37d4658b41cec6d2f6719f">qb::Actor::onInit</a></div><div class="ttdeci">virtual bool onInit()</div><div class="ttdoc">Initialization callback, called once after construction and ID assignment.</div><div class="ttdef"><b>Definition</b> Actor.h:198</div></div>
<div class="ttc" id="aclassqb_1_1_event_html"><div class="ttname"><a href="classqb_1_1_event.html">qb::Event</a></div><div class="ttdoc">Base class for all events in the actor system.</div><div class="ttdef"><b>Definition</b> Event.h:85</div></div>
<div class="ttc" id="aclassqb_1_1io_1_1cout_html"><div class="ttname"><a href="classqb_1_1io_1_1cout.html">qb::io::cout</a></div><div class="ttdoc">Thread-safe console output class.</div><div class="ttdef"><b>Definition</b> io.h:100</div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div><div class="ttdoc">Core I/O and logging utilities for the qb framework.</div></div>
</div><!-- fragment --><p>Key takeaways from the example:</p><ul>
<li><b><span class="tt">onInit()</span> is Vital:</b> This is where you <em>must</em> call <span class="tt">registerEvent&lt;YourEventType&gt;(*this)</span> for every type of event your actor intends to process.</li>
<li><b>Event Handlers:</b> Public methods named <span class="tt">on</span> with a parameter of the event type (e.g., <span class="tt">void on(const CountEvent&amp; event)</span>).</li>
<li><b>Self-Termination:</b> An actor can decide to shut itself down by calling <span class="tt">kill()</span>.</li>
<li><b>RAII:</b> Use member variables with destructors (like <span class="tt">std::unique_ptr</span>, <span class="tt">std::fstream</span>, custom classes) for resource management. They will be cleaned up when the actor is destroyed.</li>
</ul>
<h2>Actor Identity: <span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span></h2>
<p>Every active actor in the QB system possesses a unique <span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span> (<span class="tt"><a class="el" href="core_2_actor_id_8h.html" title="Actor and core identification for the QB Actor Framework.">qb/core/ActorId.h</a></span>). This ID is the "address" you use to send events to a specific actor.</p>
<ul>
<li><b>Composition:</b> It's a 32-bit identifier combining:<ul>
<li><span class="tt">CoreId</span> (uint16_t): The index of the <span class="tt">VirtualCore</span> (worker thread) hosting the actor.</li>
<li><span class="tt">ServiceId</span> (uint16_t): An ID unique <em>within that specific core</em>.</li>
</ul>
</li>
<li><b>How to Get It:</b><ul>
<li>Inside an actor: Call the <span class="tt">id()</span> method.</li>
<li>When creating an actor: Returned by <span class="tt">main.addActor&lt;MyActor&gt;(core_id, ...)</span>, <span class="tt">core.addActor&lt;MyActor&gt;(...)</span>, or <span class="tt">parent_actor.addRefActor&lt;ChildActor&gt;()-&gt;id()</span>.</li>
</ul>
</li>
<li><b>Key <span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span> Methods:</b><ul>
<li><span class="tt">sid()</span>: Returns the <span class="tt">ServiceId</span> part.</li>
<li><span class="tt">index()</span>: Returns the <span class="tt">CoreId</span> part.</li>
<li><span class="tt">is_valid()</span>: Checks if the ID is a valid, assigned ID (not the default-constructed, invalid <span class="tt">ActorId()</span>).</li>
<li><span class="tt">is_broadcast()</span>: Checks if it's a special broadcast ID.</li>
</ul>
</li>
<li><b>Special <span class="tt">ActorId</span> Values:</b><ul>
<li><span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId()</a></span>: A default-constructed, invalid ID. Useful for uninitialized ID members.</li>
<li><span class="tt"><a class="el" href="classqb_1_1_broadcast_id.html" title="Specialized ActorId for broadcasting messages to all actors on a core.">qb::BroadcastId(core_id)</a></span>: A special ID used with <span class="tt">push&lt;Event&gt;(BroadcastId(core_id), ...)</span> to send an event to <em>all</em> actors running on the specified <span class="tt">core_id</span>. The underlying <span class="tt">ServiceId</span> for this is <span class="tt">ActorId::BroadcastSid</span>.</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Inside an actor method:</span></div>
<div class="line"><a class="code hl_class" href="classqb_1_1_actor_id.html">qb::ActorId</a> self_id = id();</div>
<div class="line"><a class="code hl_class" href="classqb_1_1_actor_id.html">qb::ActorId</a> some_target_actor_id = getTarget(); <span class="comment">// Assume getTarget() returns a valid ActorId</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (some_target_actor_id.<a class="code hl_function" href="classqb_1_1_actor_id.html#ad8a503934d9079696333e16433daf0b1">is_valid</a>()) {</div>
<div class="line">    push&lt;MyEvent&gt;(some_target_actor_id, <span class="comment">/* event data */</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// To broadcast an event to all actors on core 1:</span></div>
<div class="line"><a class="code hl_class" href="classqb_1_1_actor_id.html">qb::ActorId</a> core1_broadcast_target = <a class="code hl_class" href="classqb_1_1_broadcast_id.html">qb::BroadcastId</a>(1);</div>
<div class="line">push&lt;SystemUpdateEvent&gt;(core1_broadcast_target, <span class="comment">/* update data */</span>);</div>
<div class="ttc" id="aclassqb_1_1_actor_id_html"><div class="ttname"><a href="classqb_1_1_actor_id.html">qb::ActorId</a></div><div class="ttdoc">Unique identifier for actors.</div><div class="ttdef"><b>Definition</b> ActorId.h:374</div></div>
<div class="ttc" id="aclassqb_1_1_actor_id_html_ad8a503934d9079696333e16433daf0b1"><div class="ttname"><a href="classqb_1_1_actor_id.html#ad8a503934d9079696333e16433daf0b1">qb::ActorId::is_valid</a></div><div class="ttdeci">bool is_valid() const noexcept</div><div class="ttdoc">Check if this ActorId is valid (not NotFound)</div></div>
<div class="ttc" id="aclassqb_1_1_broadcast_id_html"><div class="ttname"><a href="classqb_1_1_broadcast_id.html">qb::BroadcastId</a></div><div class="ttdoc">Specialized ActorId for broadcasting messages to all actors on a core.</div><div class="ttdef"><b>Definition</b> ActorId.h:445</div></div>
</div><!-- fragment --><h2>Actor Lifecycle: A Brief Overview</h2>
<p>The journey of an actor involves several stages, from creation to destruction. The <span class="tt">onInit()</span> and <span class="tt">~Actor()</span> methods are critical hooks into this lifecycle.</p>
<p><b>(For a detailed step-by-step breakdown, see:</b> QB-Core: Actor Lifecycle**)**</p>
<h2>Managing Actor State</h2>
<ul>
<li><b>Encapsulation is Key:</b> Always keep an actor's state (its member variables) <span class="tt">private</span> or <span class="tt">protected</span>.</li>
<li><b>Sequential Access = Thread Safety:</b> Because a <span class="tt">VirtualCore</span> processes events for an actor one by one, you don't need mutexes or other locks to protect the actor's <em>own</em> member variables from race conditions caused by <em>its own event handlers</em>.</li>
<li><b>Avoid Blocking:</b> Event handlers (<span class="tt">on(Event&amp;)</span> methods) and <span class="tt">ICallback::onCallback()</span> implementations <b>must never block</b>. Long computations, synchronous I/O (like reading a file directly in a handler), or waiting on external locks will freeze the entire <span class="tt">VirtualCore</span>, preventing it from processing events for <em>any</em> actor assigned to it. Offload such tasks using <span class="tt"><a class="el" href="group___async.html#ga79acd187eb2aeb629523ebb206ee004d" title="Utility function to schedule a callable for execution after a timeout.">qb::io::async::callback</a></span> or by delegating to other specialized actors.</li>
<li><b>Interacting with External Shared State:</b> If an actor <em>must</em> interact with resources shared outside the actor model (e.g., a global static variable, a non-thread-safe third-party library), you are responsible for ensuring thread-safe access to that external resource. Consider encapsulating such resources within a dedicated "manager" actor to serialize access.</li>
</ul>
<p>By adhering to these principles, you can build complex, concurrent applications where state management is significantly simplified and common concurrency bugs are inherently avoided.</p>
<p><b>(Next:</b> Core Concepts: QB Event System**)** </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="index.html">QB Actor Framework: High-Performance C++17 Concurrent Systems</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
