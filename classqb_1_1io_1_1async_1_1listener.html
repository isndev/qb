<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <head>
        <meta http-equiv="cache-control" content="max-age=86400"/>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=9"/>
        <meta name="generator" content="Doxygen 1.14.0"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>qb: qb::io::async::listener Class Reference</title>
        <meta name="description" content="qb OpenSource C++17 Actor Framework Documentation, all API detailed">
        <meta name="keywords"
              content="qb, cube, actor, framework, actor framework, opensource, cpp, c++, cpp17, c++17, documentation, docs, git">
        <meta name="author" content="isndev">
        <!-- BEGIN opengraph metadata -->
<!--        <meta property="og:title" content="Doxygen Awesome"/>-->
<!--        <meta property="og:image"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta property="og:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
<!--        <meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/"/>-->
        <!-- END opengraph metadata -->
        <!-- BEGIN twitter metadata -->
<!--        <meta name="twitter:image:src"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta name="twitter:title" content="Doxygen Awesome"/>-->
<!--        <meta name="twitter:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
        <!-- END twitter metadata -->
        <title>qb: qb::io::async::listener Class Reference</title>
        <link href="tabs.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
        <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
        <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
        <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
        <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
        <script type="text/javascript" src="toggle-alternative-theme.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
            DoxygenAwesomeDarkModeToggle.init()
            DoxygenAwesomeParagraphLink.init()
            DoxygenAwesomeInteractiveToc.init()
            DoxygenAwesomeTabs.init()
        </script>
        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css"/>
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
    </head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/isndev/qb" class="github-corner" title="View source on GitHub"
   target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40"
         style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm {
    animation: octocat-wave 560ms ease-in-out
}
@keyframes octocat-wave {
    0%, 100% {
        transform: rotate(0)
    }
    20%, 60% {
        transform: rotate(-25deg)
    }
    40%, 80% {
        transform: rotate(10deg)
    }
}
@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none
    }
    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }
}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr style="height: 56px;">
                <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">qb
                        &#160;<span id="projectnumber">2.0.0.0</span>
                    </div>
                    <div id="projectbrief">C++17 Actor Framework</div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div style="padding-left: 0.5em;">
        <a class="navbar-brand" href="https://github.com/isndev/qb">
            <img src="GitHub-Mark-64px.png" width="32px" alt="qb">
        </a>
        <a class="github-button" href="https://github.com/isndev/qb/issues" data-icon="octicon-issue-opened" data-size="large" data-show-count="true" aria-label="Issue isndev/qb on GitHub">Issue</a>
        <a class="github-button" href="https://github.com/isndev/qb/subscription" data-icon="octicon-eye" data-size="large" data-show-count="true" aria-label="Watch isndev/qb on GitHub">Watch</a>
        <a class="github-button" href="https://github.com/isndev/qb" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star isndev/qb on GitHub">Star</a>
        <a class="github-button" href="https://github.com/isndev/qb/fork" data-icon="octicon-repo-forked" data-size="large" data-show-count="true" aria-label="Fork isndev/qb on GitHub">Fork</a>
        <a class="github-button" href="https://github.com/isndev" data-size="large" data-show-count="false" aria-label="Follow @isndev on GitHub">Follow @isndev</a>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classqb_1_1io_1_1async_1_1listener.html','','classqb_1_1io_1_1async_1_1listener-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">qb::io::async::listener Class Reference<div class="ingroups"><a class="el" href="group___q_b.html">QB Actor Framework</a> &raquo; <a class="el" href="group___i_o.html">IO System</a> &raquo; <a class="el" href="group___async.html">Asynchronous System</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Central event loop manager for asynchronous IO operations.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="async_2listener_8h_source.html">listener.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for qb::io::async::listener:</div>
<div class="dyncontent">
<div class="center"><img src="classqb_1_1io_1_1async_1_1listener__coll__graph.png" border="0" usemap="#aqb_1_1io_1_1async_1_1listener_coll__map" loading="lazy" alt="Collaboration graph"/></div>
<map name="aqb_1_1io_1_1async_1_1listener_coll__map" id="aqb_1_1io_1_1async_1_1listener_coll__map">
<area shape="rect" title="Central event loop manager for asynchronous IO operations." alt="" coords="5,5,152,31"/>
<area shape="poly" title=" " alt="" coords="168,12,178,18,153,25,152,20,173,18,166,17"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:RegisteredKernelEvent" id="r_RegisteredKernelEvent"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classqb_1_1io_1_1async_1_1listener_1_1_registered_kernel_event.html">RegisteredKernelEvent</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Template wrapper for concrete event handlers and their associated libev watchers.  <a href="classqb_1_1io_1_1async_1_1listener_1_1_registered_kernel_event.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a492654cc176cff7937af5767e5e1bb69" id="r_a492654cc176cff7937af5767e5e1bb69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a492654cc176cff7937af5767e5e1bb69">listener</a> ()</td></tr>
<tr class="memdesc:a492654cc176cff7937af5767e5e1bb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="memitem:ac01943f2301f1e01fc28cceab0d3a6be" id="r_ac01943f2301f1e01fc28cceab0d3a6be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac01943f2301f1e01fc28cceab0d3a6be">clear</a> ()</td></tr>
<tr class="memdesc:ac01943f2301f1e01fc28cceab0d3a6be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all registered events from this listener.  <br /></td></tr>
<tr class="memitem:acc27d704b9e3203fd96e5440f9a0875c" id="r_acc27d704b9e3203fd96e5440f9a0875c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc27d704b9e3203fd96e5440f9a0875c">~listener</a> () noexcept</td></tr>
<tr class="memdesc:acc27d704b9e3203fd96e5440f9a0875c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <br /></td></tr>
<tr class="memitem:ad3d972f45076eeb6982cb58cb7fb12f3" id="r_ad3d972f45076eeb6982cb58cb7fb12f3"><td class="memTemplParams" colspan="2">template&lt;typename EV_EVENT&gt; </td></tr>
<tr class="memitem:ad3d972f45076eeb6982cb58cb7fb12f3 template"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3d972f45076eeb6982cb58cb7fb12f3">on</a> (EV_EVENT &amp;<a class="el" href="group___event_core.html#ga3296038c4343f22626c6595a222c0d95">event</a>, int revents)</td></tr>
<tr class="memdesc:ad3d972f45076eeb6982cb58cb7fb12f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic event callback handler invoked by libev for any active watcher.  <br /></td></tr>
<tr class="memitem:ac437fa00afc2cfe6826eeae4ff1769b1" id="r_ac437fa00afc2cfe6826eeae4ff1769b1"><td class="memTemplParams" colspan="2">template&lt;typename _Event, typename _Actor, typename... _Args&gt; </td></tr>
<tr class="memitem:ac437fa00afc2cfe6826eeae4ff1769b1 template"><td class="memItemLeft" align="right" valign="top">_Event &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac437fa00afc2cfe6826eeae4ff1769b1">registerEvent</a> (_Actor &amp;<a class="el" href="group___actor.html#gac38e7a5f336d9e903240705500b6d9b6">actor</a>, _Args &amp;&amp;...args)</td></tr>
<tr class="memdesc:ac437fa00afc2cfe6826eeae4ff1769b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an event handler (actor/object) for a specific asynchronous event type.  <br /></td></tr>
<tr class="memitem:a8b62854e438fe9ff75dbcf78e2e4d783" id="r_a8b62854e438fe9ff75dbcf78e2e4d783"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b62854e438fe9ff75dbcf78e2e4d783">unregisterEvent</a> (<a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html">IRegisteredKernelEvent</a> *kevent)</td></tr>
<tr class="memdesc:a8b62854e438fe9ff75dbcf78e2e4d783"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister an event handler and its associated libev watcher.  <br /></td></tr>
<tr class="memitem:a0e7c928405336e8bd40d61c0cb0bb874" id="r_a0e7c928405336e8bd40d61c0cb0bb874"><td class="memItemLeft" align="right" valign="top">ev::loop_ref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e7c928405336e8bd40d61c0cb0bb874">loop</a> () const</td></tr>
<tr class="memdesc:a0e7c928405336e8bd40d61c0cb0bb874"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to the underlying libev event loop.  <br /></td></tr>
<tr class="memitem:a7540e043746f0305b1363cf13909ccf4" id="r_a7540e043746f0305b1363cf13909ccf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4">run</a> (int flag=0)</td></tr>
<tr class="memdesc:a7540e043746f0305b1363cf13909ccf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the event loop to process pending events.  <br /></td></tr>
<tr class="memitem:a5d397772509d2a3b093bdb64434a7299" id="r_a5d397772509d2a3b093bdb64434a7299"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d397772509d2a3b093bdb64434a7299">break_one</a> ()</td></tr>
<tr class="memdesc:a5d397772509d2a3b093bdb64434a7299"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the event loop to break out of its current <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span> cycle.  <br /></td></tr>
<tr class="memitem:a6c923f0a021d21ba1a0d669658b25487" id="r_a6c923f0a021d21ba1a0d669658b25487"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c923f0a021d21ba1a0d669658b25487">nb_invoked_event</a> () const</td></tr>
<tr class="memdesc:a6c923f0a021d21ba1a0d669658b25487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of events invoked during the last call to <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span>.  <br /></td></tr>
<tr class="memitem:a13daa35c875df13c05022bf2779d4571" id="r_a13daa35c875df13c05022bf2779d4571"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13daa35c875df13c05022bf2779d4571">size</a> () const</td></tr>
<tr class="memdesc:a13daa35c875df13c05022bf2779d4571"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of currently registered event handlers.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-static-attribs" class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a4b1d56f544dc8f60eac6464038885bf8" id="r_a4b1d56f544dc8f60eac6464038885bf8"><td class="memItemLeft" align="right" valign="top">static thread_local <a class="el" href="classqb_1_1io_1_1async_1_1listener.html">listener</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b1d56f544dc8f60eac6464038885bf8">current</a></td></tr>
<tr class="memdesc:a4b1d56f544dc8f60eac6464038885bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-local instance of the listener.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Central event loop manager for asynchronous IO operations. </p>
<p>The listener class is the core of the asynchronous event system. It manages an event loop (based on libev) that handles all asynchronous events (IO, timer, signal, etc.) and dispatches them to registered handlers.</p>
<p>Each thread has its own listener instance accessible via the thread_local static member 'current'. </p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a492654cc176cff7937af5767e5e1bb69" name="a492654cc176cff7937af5767e5e1bb69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a492654cc176cff7937af5767e5e1bb69">&#9670;&#160;</a></span>listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">qb::io::async::listener::listener </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>Creates a new listener with a dynamic event loop using automatic detection of the best available backend (e.g., epoll, kqueue, select) via libev's EVFLAG_AUTO. </p>

</div>
</div>
<a id="acc27d704b9e3203fd96e5440f9a0875c" name="acc27d704b9e3203fd96e5440f9a0875c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc27d704b9e3203fd96e5440f9a0875c">&#9670;&#160;</a></span>~listener()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">qb::io::async::listener::~listener </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>Cleans up by calling <span class="tt"><a class="el" href="#ac01943f2301f1e01fc28cceab0d3a6be" title="Clear all registered events from this listener.">clear()</a></span> to remove all registered events and their watchers. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="ac01943f2301f1e01fc28cceab0d3a6be" name="ac01943f2301f1e01fc28cceab0d3a6be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac01943f2301f1e01fc28cceab0d3a6be">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void qb::io::async::listener::clear </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear all registered events from this listener. </p>
<p>Removes and deletes all registered event handlers (<a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html" title="Interface for kernel event registration and invocation.">IRegisteredKernelEvent</a> instances). It also runs the event loop once with <span class="tt">EVRUN_ONCE</span> to process any pending libev events before fully clearing, which might be necessary for proper cleanup of some watchers. </p><dl class="section note"><dt>Note</dt><dd>This is automatically called by the listener's destructor. </dd></dl>

</div>
</div>
<a id="ad3d972f45076eeb6982cb58cb7fb12f3" name="ad3d972f45076eeb6982cb58cb7fb12f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d972f45076eeb6982cb58cb7fb12f3">&#9670;&#160;</a></span>on()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EV_EVENT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void qb::io::async::listener::on </td>
          <td>(</td>
          <td class="paramtype">EV_EVENT &amp;</td>          <td class="paramname"><span class="paramname"><em>event</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>revents</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic event callback handler invoked by libev for any active watcher. </p>
<p>This method is the entry point for libev to notify of an event. It updates the custom event wrapper's <span class="tt">_revents</span> field and then invokes the stored <span class="tt"><a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html#aba6ad8b9613119f62b11c8b787c2adc1" title="Event invocation method, called by the listener when the event triggers.">IRegisteredKernelEvent::invoke()</a></span> method, which in turn calls the user-defined <span class="tt">on(SpecificEvent&amp;)</span> handler in the registered actor/object.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">EV_EVENT</td><td>The specific libev watcher type (e.g., <span class="tt">ev::io</span>, <span class="tt">ev::timer</span>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The libev watcher that was triggered. </td></tr>
    <tr><td class="paramname">revents</td><td>The bitmask of triggered event flags (e.g., <span class="tt">EV_READ</span>, <span class="tt">EV_WRITE</span>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac437fa00afc2cfe6826eeae4ff1769b1" name="ac437fa00afc2cfe6826eeae4ff1769b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac437fa00afc2cfe6826eeae4ff1769b1">&#9670;&#160;</a></span>registerEvent()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Event, typename _Actor, typename... _Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_Event &amp; qb::io::async::listener::registerEvent </td>
          <td>(</td>
          <td class="paramtype">_Actor &amp;</td>          <td class="paramname"><span class="paramname"><em>actor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">_Args &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>args</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register an event handler (actor/object) for a specific asynchronous event type. </p>
<p>Creates a <span class="tt"><a class="el" href="classqb_1_1io_1_1async_1_1listener_1_1_registered_kernel_event.html" title="Template wrapper for concrete event handlers and their associated libev watchers.">RegisteredKernelEvent</a></span> wrapper for the given actor and event type, initializes the underlying libev watcher with the provided arguments, and registers it with this listener's event loop.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">_Event</td><td>The qb-io event type (e.g., <span class="tt"><a class="el" href="structqb_1_1io_1_1async_1_1event_1_1io.html" title="Event for file descriptor I/O readiness notifications (read/write).">qb::io::async::event::io</a></span>, <span class="tt"><a class="el" href="structqb_1_1io_1_1async_1_1event_1_1timer.html" title="Event for handling time-based operations (timers and timeouts).">qb::io::async::event::timer</a></span>). This type wraps a specific libev watcher. </td></tr>
    <tr><td class="paramname">_Actor</td><td>The type of the class that will handle the event (must have an <span class="tt">on(_Event&amp;)</span> method). </td></tr>
    <tr><td class="paramname">_Args</td><td>Types of additional arguments for initializing the libev watcher (e.g., fd and event flags for <span class="tt">ev::io</span>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">actor</td><td>Reference to the actor/object instance that will handle the event. </td></tr>
    <tr><td class="paramname">args</td><td>Additional arguments forwarded to the libev watcher's <span class="tt">set()</span> or equivalent initialization method. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to the created <span class="tt">_Event</span> object (which is also the libev watcher). This reference can be used to later <span class="tt">start()</span> or <span class="tt">stop()</span> the watcher. </dd></dl>

</div>
</div>
<a id="a8b62854e438fe9ff75dbcf78e2e4d783" name="a8b62854e438fe9ff75dbcf78e2e4d783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b62854e438fe9ff75dbcf78e2e4d783">&#9670;&#160;</a></span>unregisterEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void qb::io::async::listener::unregisterEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html">IRegisteredKernelEvent</a> *</td>          <td class="paramname"><span class="paramname"><em>kevent</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unregister an event handler and its associated libev watcher. </p>
<p>Removes the specified <span class="tt"><a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html" title="Interface for kernel event registration and invocation.">IRegisteredKernelEvent</a></span> from the listener's tracking and deletes the event handler object, which also stops and cleans up the underlying libev watcher via its destructor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kevent</td><td>Pointer to the <span class="tt"><a class="el" href="classqb_1_1io_1_1async_1_1_i_registered_kernel_event.html" title="Interface for kernel event registration and invocation.">IRegisteredKernelEvent</a></span> to unregister. This pointer is typically obtained when the event was initially registered or stored within the libev watcher wrapper itself (e.g., <span class="tt">_Event::_interface</span>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e7c928405336e8bd40d61c0cb0bb874" name="a0e7c928405336e8bd40d61c0cb0bb874"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e7c928405336e8bd40d61c0cb0bb874">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ev::loop_ref qb::io::async::listener::loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a reference to the underlying libev event loop. </p>
<dl class="section return"><dt>Returns</dt><dd><span class="tt">ev::loop_ref</span> (a reference wrapper to <span class="tt">ev_loop*</span>) for this listener.</dd></dl>
<p>Useful for advanced direct interaction with libev if needed, though most operations are handled through the listener's API. </p>

</div>
</div>
<a id="a7540e043746f0305b1363cf13909ccf4" name="a7540e043746f0305b1363cf13909ccf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7540e043746f0305b1363cf13909ccf4">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void qb::io::async::listener::run </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>flag</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run the event loop to process pending events. </p>
<p>Executes the event loop with the specified libev run flag. This call blocks or returns based on the flag and event activity. It also resets the <span class="tt">_nb_invoked_events</span> counter before running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>The libev run flag (e.g., <span class="tt">EVRUN_NOWAIT</span> to check once and return, <span class="tt">EVRUN_ONCE</span> to wait for and process one event block, <span class="tt">0</span> for default blocking run). Default is <span class="tt">0</span>, which means <span class="tt">ev_run</span> will block until <span class="tt">ev_break</span> is called or no active watchers remain. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5d397772509d2a3b093bdb64434a7299" name="a5d397772509d2a3b093bdb64434a7299"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d397772509d2a3b093bdb64434a7299">&#9670;&#160;</a></span>break_one()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void qb::io::async::listener::break_one </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request the event loop to break out of its current <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span> cycle. </p>
<p>This signals the libev loop to stop processing further events in the current <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span> invocation. If <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span> was called with default blocking behavior, it will return after the current event (if any) is processed. </p>

</div>
</div>
<a id="a6c923f0a021d21ba1a0d669658b25487" name="a6c923f0a021d21ba1a0d669658b25487"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c923f0a021d21ba1a0d669658b25487">&#9670;&#160;</a></span>nb_invoked_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t qb::io::async::listener::nb_invoked_event </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of events invoked during the last call to <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span>. </p>
<dl class="section return"><dt>Returns</dt><dd>The count of events that were processed and dispatched to handlers. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This counter is reset at the beginning of each <span class="tt"><a class="el" href="#a7540e043746f0305b1363cf13909ccf4" title="Run the event loop to process pending events.">run()</a></span> call. </dd></dl>

</div>
</div>
<a id="a13daa35c875df13c05022bf2779d4571" name="a13daa35c875df13c05022bf2779d4571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13daa35c875df13c05022bf2779d4571">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t qb::io::async::listener::size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of currently registered event handlers. </p>
<dl class="section return"><dt>Returns</dt><dd>The total number of active event watchers managed by this listener. </dd></dl>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="a4b1d56f544dc8f60eac6464038885bf8" name="a4b1d56f544dc8f60eac6464038885bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b1d56f544dc8f60eac6464038885bf8">&#9670;&#160;</a></span>current</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">thread_local <a class="el" href="classqb_1_1io_1_1async_1_1listener.html">listener</a> qb::io::async::listener::current</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread-local instance of the listener. </p>
<p>Each thread has its own listener accessible through this static member. This provides a way to access the current thread's event loop without passing a reference explicitly. </p><dl class="section note"><dt>Note</dt><dd>This is typically initialized automatically when <span class="tt"><a class="el" href="classqb_1_1_main.html" title="The main controller for the QB Actor Framework engine.">qb::Main</a></span> starts its <span class="tt"><a class="el" href="classqb_1_1_virtual_core.html" title="Manages a virtual processing core (worker thread) in the actor system.">VirtualCore</a></span> threads, or by calling <span class="tt"><a class="el" href="group___async.html#ga3d0a05b7d643be12ca6cf17281cd0de7" title="Initialize the asynchronous event system for the current thread.">qb::io::async::init()</a></span> for standalone <span class="tt">qb-io</span> usage. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>qb</b></li><li class="navelem"><b>io</b></li><li class="navelem"><b>async</b></li><li class="navelem"><a href="classqb_1_1io_1_1async_1_1listener.html">listener</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
