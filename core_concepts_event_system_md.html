<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <head>
        <meta http-equiv="cache-control" content="max-age=86400"/>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=9"/>
        <meta name="generator" content="Doxygen 1.14.0"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>qb: Core Concept: The QB Event System</title>
        <meta name="description" content="qb OpenSource C++17 Actor Framework Documentation, all API detailed">
        <meta name="keywords"
              content="qb, cube, actor, framework, actor framework, opensource, cpp, c++, cpp17, c++17, documentation, docs, git">
        <meta name="author" content="isndev">
        <!-- BEGIN opengraph metadata -->
<!--        <meta property="og:title" content="Doxygen Awesome"/>-->
<!--        <meta property="og:image"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta property="og:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
<!--        <meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/"/>-->
        <!-- END opengraph metadata -->
        <!-- BEGIN twitter metadata -->
<!--        <meta name="twitter:image:src"-->
<!--              content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452"/>-->
<!--        <meta name="twitter:title" content="Doxygen Awesome"/>-->
<!--        <meta name="twitter:description"-->
<!--              content="Custom CSS theme for doxygen html-documentation with lots of customization parameters."/>-->
        <!-- END twitter metadata -->
        <title>qb: Core Concept: The QB Event System</title>
        <link href="tabs.css" rel="stylesheet" type="text/css"/>
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
        <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
        <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
        <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
        <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
        <script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
        <script type="text/javascript" src="toggle-alternative-theme.js"></script>
        <script type="text/javascript">
            DoxygenAwesomeFragmentCopyButton.init()
            DoxygenAwesomeDarkModeToggle.init()
            DoxygenAwesomeParagraphLink.init()
            DoxygenAwesomeInteractiveToc.init()
            DoxygenAwesomeTabs.init()
        </script>
        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css"/>
        <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
    </head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/isndev/qb" class="github-corner" title="View source on GitHub"
   target="_blank" rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40"
         style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm {
    animation: octocat-wave 560ms ease-in-out
}
@keyframes octocat-wave {
    0%, 100% {
        transform: rotate(0)
    }
    20%, 60% {
        transform: rotate(-25deg)
    }
    40%, 80% {
        transform: rotate(10deg)
    }
}
@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none
    }
    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }
}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
            <tbody>
            <tr style="height: 56px;">
                <td id="projectlogo"><img alt="Logo" src="logo.svg"/></td>
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">qb
                        &#160;<span id="projectnumber">2.0.0.0</span>
                    </div>
                    <div id="projectbrief">C++17 Actor Framework</div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div style="padding-left: 0.5em;">
        <a class="navbar-brand" href="https://github.com/isndev/qb">
            <img src="GitHub-Mark-64px.png" width="32px" alt="qb">
        </a>
        <a class="github-button" href="https://github.com/isndev/qb/issues" data-icon="octicon-issue-opened" data-size="large" data-show-count="true" aria-label="Issue isndev/qb on GitHub">Issue</a>
        <a class="github-button" href="https://github.com/isndev/qb/subscription" data-icon="octicon-eye" data-size="large" data-show-count="true" aria-label="Watch isndev/qb on GitHub">Watch</a>
        <a class="github-button" href="https://github.com/isndev/qb" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star isndev/qb on GitHub">Star</a>
        <a class="github-button" href="https://github.com/isndev/qb/fork" data-icon="octicon-repo-forked" data-size="large" data-show-count="true" aria-label="Fork isndev/qb on GitHub">Fork</a>
        <a class="github-button" href="https://github.com/isndev" data-size="large" data-show-count="false" aria-label="Follow @isndev on GitHub">Follow @isndev</a>
    </div>
    <!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('core_concepts_event_system_md.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Core Concept: The QB Event System </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Dive into how actors communicate in QB using events, from definition to handling.</p>
<h1>Core Concept: The QB Event System</h1>
<p>In the QB Actor Framework, <b>events are the exclusive means of communication between actors</b>. They are the lifeblood of the system, enabling actors to interact asynchronously and safely. Understanding events is crucial to designing effective actor-based applications.</p>
<h2><span class="tt"><a class="el" href="classqb_1_1_event.html" title="Base class for all events in the actor system.">qb::Event</a></span>: The Foundation of Actor Messages</h2>
<p>All messages exchanged between actors must inherit publicly from the <span class="tt"><a class="el" href="classqb_1_1_event.html" title="Base class for all events in the actor system.">qb::Event</a></span> base class, defined in <span class="tt"><a class="el" href="core_2_event_8h.html" title="Event system for the QB Actor Framework.">qb/core/Event.h</a></span>.</p>
<p><b>Key Characteristics &amp; Purpose:</b></p>
<ul>
<li><b>Data Carriers:</b> Events are primarily designed to carry data. The receiving actor uses this data to decide what action to perform. Avoid embedding complex logic within event classes themselves.</li>
<li><b>Asynchronous Nature:</b> Sending an event is a non-blocking operation. The sender dispatches the event and continues its work without waiting for the recipient to process it.</li>
<li><b>Immutability (by convention):</b> While C++ doesn't enforce deep immutability easily, it's best practice to treat events as immutable once sent. If an actor receives an event and needs to pass on modified information, it should typically create and send a <em>new</em> event, unless specifically using efficient forwarding mechanisms like <span class="tt">reply()</span> or <span class="tt">forward()</span>.</li>
</ul>
<p><b>Base <span class="tt"><a class="el" href="classqb_1_1_event.html" title="Base class for all events in the actor system.">qb::Event</a></span> Members (Framework-Managed):</b></p>
<p>The <span class="tt"><a class="el" href="classqb_1_1_event.html" title="Base class for all events in the actor system.">qb::Event</a></span> base class provides essential metadata used internally by the framework for routing and management:</p>
<ul>
<li><span class="tt">id</span> (<span class="tt"><a class="el" href="group___core.html#gaf683acbb340cfc58aa37ce6bbbe5ebbd" title="Type definition for event identifiers.">qb::EventId</a></span>): A type identifier for the event, generated using <span class="tt"><a class="el" href="group___event_core.html#ga451cbf351ccabd9a0bade0069afad19e" title="Function to get a unique type identifier for a given type.">qb::type_id</a>&lt;YourEventType&gt;()</span>. Used by the framework to dispatch the event to the correct <span class="tt">on()</span> handler.</li>
<li><span class="tt">dest</span> (<span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span>): The unique ID of the actor intended to receive this event.</li>
<li><span class="tt">source</span> (<span class="tt"><a class="el" href="classqb_1_1_actor_id.html" title="Unique identifier for actors.">qb::ActorId</a></span>): The unique ID of the actor that sent this event.</li>
<li><span class="tt">is_alive()</span>: An internal flag, primarily for efficient event reuse with <span class="tt">reply()</span> and <span class="tt">forward()</span>.</li>
<li><span class="tt">getQOS()</span>: Quality of Service indicator (internal use).</li>
<li><span class="tt">getSize()</span>: Size of the memory block allocated for this event (internal use).</li>
</ul>
<h3>Defining Your Own Events</h3>
<p>To create custom events, simply define a <span class="tt">struct</span> or <span class="tt">class</span> that inherits from <span class="tt"><a class="el" href="classqb_1_1_event.html" title="Base class for all events in the actor system.">qb::Event</a></span> and add your data members.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_event_8h.html">qb/event.h</a>&gt;</span>   <span class="comment">// For qb::Event</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_actor_id_8h.html">qb/actorid.h</a>&gt;</span> <span class="comment">// For qb::ActorId</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">qb/string.h</a>&gt;</span>  <span class="comment">// For qb::string (efficient fixed-size string)</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span>       <span class="comment">// For std::string</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span>       <span class="comment">// For std::vector</span></div>
<div class="line"><span class="preprocessor">#include &lt;memory&gt;</span>       <span class="comment">// For std::shared_ptr</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 1. A simple signal event (no data)</span></div>
<div class="line"><span class="keyword">struct </span>StartProcessingSignal : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2. Event with basic data members</span></div>
<div class="line"><span class="keyword">struct </span>UpdateValueCommand : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {</div>
<div class="line">    <span class="keywordtype">int</span> key;</div>
<div class="line">    <span class="keywordtype">double</span> value;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Constructor for easy initialization</span></div>
<div class="line">    UpdateValueCommand(<span class="keywordtype">int</span> k, <span class="keywordtype">double</span> v) : key(k), value(v) {}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 3. Event with a qb::string (efficient for small, fixed-size strings)</span></div>
<div class="line"><span class="keyword">struct </span>LogMessageInfo : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {</div>
<div class="line">    <a class="code hl_typedef" href="group___j_s_o_n.html#ga48637f6b3ae62ec4f5a634ce178099e1">qb::string&lt;128&gt;</a> message_text; <span class="comment">// Max 128 chars for this log message</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">explicit</span> LogMessageInfo(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg) : message_text(msg) {}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 4. Event with std::string (suitable for qb::Actor::push())</span></div>
<div class="line"><span class="comment">//    For qb::Actor::send(), the event must be trivially destructible.</span></div>
<div class="line"><span class="keyword">struct </span>UserCommand : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {</div>
<div class="line">    std::string user_input;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">explicit</span> UserCommand(std::string input) : user_input(std::move(input)) {}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 5. Event carrying large or shared data via std::shared_ptr (recommended)</span></div>
<div class="line"><span class="comment">//    This avoids copying large data during message passing.</span></div>
<div class="line"><span class="keyword">struct </span>ProcessLargeDataset : <a class="code hl_class" href="classqb_1_1_event.html">qb::Event</a> {</div>
<div class="line">    std::shared_ptr&lt;std::vector&lt;uint8_t&gt;&gt; data_buffer;</div>
<div class="line">    <span class="keywordtype">size_t</span> data_size;</div>
<div class="line"> </div>
<div class="line">    ProcessLargeDataset(std::shared_ptr&lt;std::vector&lt;uint8_t&gt;&gt; buffer)</div>
<div class="line">        : data_buffer(std::move(buffer)), data_size(data_buffer ? data_buffer-&gt;size() : 0) {}</div>
<div class="line">};</div>
<div class="ttc" id="a_actor_id_8h_html"><div class="ttname"><a href="_actor_id_8h.html">actorid.h</a></div><div class="ttdoc">Convenience header for QB ActorId and related identifiers.</div></div>
<div class="ttc" id="a_event_8h_html"><div class="ttname"><a href="_event_8h.html">event.h</a></div><div class="ttdoc">Convenience header for the QB Event system.</div></div>
<div class="ttc" id="aclassqb_1_1_event_html"><div class="ttname"><a href="classqb_1_1_event.html">qb::Event</a></div><div class="ttdoc">Base class for all events in the actor system.</div><div class="ttdef"><b>Definition</b> Event.h:85</div></div>
<div class="ttc" id="agroup___j_s_o_n_html_ga48637f6b3ae62ec4f5a634ce178099e1"><div class="ttname"><a href="group___j_s_o_n.html#ga48637f6b3ae62ec4f5a634ce178099e1">nlohmann::string</a></div><div class="ttdeci">json::string_t string</div><div class="ttdoc">JSON string type from nlohmann::json.</div><div class="ttdef"><b>Definition</b> json.h:67</div></div>
<div class="ttc" id="astring_8h_html"><div class="ttname"><a href="string_8h.html">string.h</a></div><div class="ttdoc">Fixed-size string implementation optimized for performance.</div></div>
</div><!-- fragment --><p><b>Performance Considerations for Event Data:</b></p>
<ul>
<li><b>Small, POD-like Data:</b> For simple data, direct members are fine.</li>
<li><b><span class="tt"><a class="el" href="classqb_1_1string.html" title="Fixed-size string with optimized storage.">qb::string</a>&lt;N&gt;</span>:</b> Use for strings where a known, relatively small maximum size is appropriate. This avoids heap allocations associated with <span class="tt">std::string</span>.</li>
<li><b><span class="tt">std::string</span>, <span class="tt">std::vector</span> (for <span class="tt">push()</span>):</b> The default <span class="tt">push()</span> mechanism correctly handles events with non-trivially destructible members like <span class="tt">std::string</span> or <span class="tt">std::vector</span>. Their destructors will be called appropriately by the framework.</li>
<li><b><span class="tt">std::shared_ptr</span> for Large Data:</b> When dealing with large data payloads (e.g., image buffers, large datasets), always wrap them in a <span class="tt">std::shared_ptr</span> (or <span class="tt">std::unique_ptr</span> if ownership semantics fit and you're careful with <span class="tt">std::move</span>). This ensures that only the pointer is copied during event serialization, not the entire data block, which is critical for performance, especially in inter-core communication.</li>
<li><b>Trivial Destructibility for <span class="tt">send()</span>:</b> If you use the specialized <span class="tt"><a class="el" href="classqb_1_1_actor.html#ac739dafd53101a1d03ddd368ea890a8c" title="Send a new event in an unordered fashion to a destination actor.">qb::Actor::send()</a></span> method for unordered, potentially lower-latency same-core messaging, the event type <b>must be trivially destructible</b>. This means it should generally only contain Plain Old Data (POD) types or types like <span class="tt"><a class="el" href="classqb_1_1string.html" title="Fixed-size string with optimized storage.">qb::string</a></span>. <span class="tt">std::string</span> or <span class="tt">std::vector</span> members are not allowed for events sent via <span class="tt">send()</span>.</li>
</ul>
<h2>Event Delivery: Sending Events</h2>
<p>Actors use methods inherited from <span class="tt"><a class="el" href="classqb_1_1_actor.html" title="Base class for all actors in the qb framework.">qb::Actor</a></span> to dispatch events to other actors. The primary methods include:</p>
<ul>
<li><b><span class="tt">push&lt;EventType&gt;(destination_actor_id, constructor_args...)</span>:</b> This is the <b>recommended and most common</b> way to send events. It guarantees that events sent from one actor to another specific actor are processed in the order they were pushed.</li>
<li><b><span class="tt">send&lt;EventType&gt;(destination_actor_id, constructor_args...)</span>:</b> For specialized use cases requiring unordered delivery and trivially destructible events.</li>
<li><b><span class="tt">broadcast&lt;EventType&gt;(constructor_args...)</span>:</b> Sends the event to all actors on all active cores.</li>
<li><b><span class="tt">reply(event_reference)</span>:</b> Efficiently sends an event back to its original source.</li>
<li><b><span class="tt">forward(new_destination_actor_id, event_reference)</span>:</b> Efficiently redirects an event to a new destination.</li>
</ul>
<p>Conceptual Event Flow: </p><div class="fragment"><div class="line">+-----------+       +---------------------+       +-------------------+       +-----------+</div>
<div class="line">|  Sender   |------&gt;| qb::Actor::push()   |------&gt;| VirtualCore       |------&gt;| Receiver  |</div>
<div class="line">|  Actor    |       | (or send, reply...) |       | (Event Mailbox &amp;  |       |  Actor    |</div>
<div class="line">+-----------+       +---------------------+       |  Event Loop for   |       +-----------+</div>
<div class="line">                                                  |  Receiver Actor)  |             |</div>
<div class="line">                                                  +-------------------+             |</div>
<div class="line">                                                        |  Dispatches Event         |</div>
<div class="line">                                                        +---------------------------+</div>
<div class="line">                                                          (invokes Receiver&#39;s on(Event&amp;) handler)</div>
</div><!-- fragment --><p><b>(For a comprehensive guide on sending events, see:</b> QB-Core: Event Messaging**)**</p>
<h2>Event Handling: Receiving and Processing Events</h2>
<p>Actors process events by registering handlers for specific event types.</p>
<ol type="1">
<li><b>Register Event Handlers (<span class="tt">onInit()</span>):</b> Inside your actor's <span class="tt">onInit()</span> method (which is called once after construction and ID assignment), you <b>must</b> call <span class="tt">registerEvent&lt;YourEventType&gt;(*this);</span> for <em>each</em> distinct event type your actor needs to handle.</li>
<li><b>Implement Handler Methods:</b> For each registered event type, implement a corresponding public <span class="tt">on()</span> method. The signature of this method is crucial:<ul>
<li><span class="tt">void on(const YourEventType&amp; event)</span>: Use this if your handler only needs to read the event's data.</li>
<li><span class="tt">void on(YourEventType&amp; event)</span>: Use this (a non-const reference) if your handler needs to modify the event (e.g., to fill in result fields) before using <span class="tt">reply(event)</span> or <span class="tt">forward(destination_id, event)</span>.</li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyDataHandler : <span class="keyword">public</span> <a class="code hl_class" href="classqb_1_1_actor.html">qb::Actor</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Constructor, etc.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_function" href="classqb_1_1_actor.html#ae61217d6ef37d4658b41cec6d2f6719f">onInit</a>()<span class="keyword"> override </span>{</div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">registerEvent&lt;UpdateValueCommand&gt;</a>(*<span class="keyword">this</span>); <span class="comment">// From example above</span></div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">registerEvent&lt;UserCommand&gt;</a>(*<span class="keyword">this</span>);        <span class="comment">// From example above</span></div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">registerEvent&lt;qb::KillEvent&gt;</a>(*<span class="keyword">this</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handler for UpdateValueCommand (read-only)</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">on</a>(<span class="keyword">const</span> UpdateValueCommand&amp; event) {</div>
<div class="line">        <span class="comment">// Process event.key and event.value</span></div>
<div class="line">        <a class="code hl_class" href="classqb_1_1io_1_1cout.html">qb::io::cout</a>() &lt;&lt; <span class="stringliteral">&quot;Received UpdateValueCommand: key=&quot;</span> &lt;&lt; <span class="keyword">event</span>.key </div>
<div class="line">                       &lt;&lt; <span class="stringliteral">&quot;, value=&quot;</span> &lt;&lt; <span class="keyword">event</span>.value &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; <span class="keyword">event</span>.getSource() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handler for UserCommand (non-const, allows for reply/forward)</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">on</a>(UserCommand&amp; event) { <span class="comment">// Note: non-const reference</span></div>
<div class="line">        <a class="code hl_class" href="classqb_1_1io_1_1cout.html">qb::io::cout</a>() &lt;&lt; <span class="stringliteral">&quot;Received UserCommand: &#39;&quot;</span> &lt;&lt; <span class="keyword">event</span>.user_input &lt;&lt; <span class="stringliteral">&quot;&#39; from &quot;</span> &lt;&lt; <span class="keyword">event</span>.getSource() &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line">        <span class="comment">// Example: Modify and reply</span></div>
<div class="line">        <span class="keyword">event</span>.user_input = <span class="stringliteral">&quot;Processed: &quot;</span> + <span class="keyword">event</span>.user_input;</div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#aa87d1fc0d9360e73182e2d76c41a3dc7">reply</a>(event); <span class="comment">// Send the modified event back to its source</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">on</a>(<span class="keyword">const</span> qb::KillEvent&amp; <span class="comment">/*event*/</span>) {</div>
<div class="line">        <a class="code hl_function" href="classqb_1_1_actor.html#ad097f332e8617029cbd8031c1f8fdf84">kill</a>();</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassqb_1_1_actor_html"><div class="ttname"><a href="classqb_1_1_actor.html">qb::Actor</a></div><div class="ttdoc">Base class for all actors in the qb framework.</div><div class="ttdef"><b>Definition</b> Actor.h:106</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a0b7ee1d2a9d94988860df5ba5f19072c"><div class="ttname"><a href="classqb_1_1_actor.html#a0b7ee1d2a9d94988860df5ba5f19072c">qb::Actor::registerEvent</a></div><div class="ttdeci">void registerEvent(_Actor &amp;actor) const noexcept</div><div class="ttdoc">Subscribe this actor to listen for a specific event type.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_a245a2b7be6e086bf622d2acb78b9bded"><div class="ttname"><a href="classqb_1_1_actor.html#a245a2b7be6e086bf622d2acb78b9bded">qb::Actor::on</a></div><div class="ttdeci">void on(KillEvent const &amp;event) noexcept</div><div class="ttdoc">Handler for KillEvent.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_aa87d1fc0d9360e73182e2d76c41a3dc7"><div class="ttname"><a href="classqb_1_1_actor.html#aa87d1fc0d9360e73182e2d76c41a3dc7">qb::Actor::reply</a></div><div class="ttdeci">void reply(Event &amp;event) const noexcept</div><div class="ttdoc">Reply to the source of a received event, reusing the event object.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_ad097f332e8617029cbd8031c1f8fdf84"><div class="ttname"><a href="classqb_1_1_actor.html#ad097f332e8617029cbd8031c1f8fdf84">qb::Actor::kill</a></div><div class="ttdeci">void kill() const noexcept</div><div class="ttdoc">Terminate this actor and mark it for removal from the system.</div></div>
<div class="ttc" id="aclassqb_1_1_actor_html_ae61217d6ef37d4658b41cec6d2f6719f"><div class="ttname"><a href="classqb_1_1_actor.html#ae61217d6ef37d4658b41cec6d2f6719f">qb::Actor::onInit</a></div><div class="ttdeci">virtual bool onInit()</div><div class="ttdoc">Initialization callback, called once after construction and ID assignment.</div><div class="ttdef"><b>Definition</b> Actor.h:198</div></div>
<div class="ttc" id="aclassqb_1_1io_1_1cout_html"><div class="ttname"><a href="classqb_1_1io_1_1cout.html">qb::io::cout</a></div><div class="ttdoc">Thread-safe console output class.</div><div class="ttdef"><b>Definition</b> io.h:100</div></div>
</div><!-- fragment --><ul>
<li><b>Dispatch Mechanism:</b> When an event arrives at an actor's <span class="tt">VirtualCore</span>, the framework uses the event's type ID (obtained from <span class="tt">event.getID()</span>) and its destination ID (<span class="tt">event.getDestination()</span>) to route it. An internal router (<span class="tt"><a class="el" href="classqb_1_1router_1_1memh.html" title="Multiple-Event Multiple-Handler router (generic version)">qb::router::memh</a></span>) then invokes the specific <span class="tt">on()</span> handler method in the target actor that matches the event type.</li>
<li><b>Sequential Guarantee:</b> Remember, an actor processes all its events sequentially. One <span class="tt">on()</span> handler will complete before the next one for that same actor begins.</li>
</ul>
<p><b>(Next:</b> Core Concepts: Asynchronous I/O Model**)** <b>(See also:</b> QB-Core: Mastering qb::Actor, QB-Core: Event Messaging**)** </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="index.html">QB Actor Framework: High-Performance C++17 Concurrent Systems</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
